(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a2a8515"],{5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var r=a("1d80"),o=a("5899"),s="["+o+"]",i=RegExp("^"+s+s+"*"),n=RegExp(s+s+"*$"),l=function(e){return function(t){var a=String(r(t));return 1&e&&(a=a.replace(i,"")),2&e&&(a=a.replace(n,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},7156:function(e,t,a){var r=a("861d"),o=a("d2bb");e.exports=function(e,t,a){var s,i;return o&&"function"==typeof(s=t.constructor)&&s!==a&&r(i=s.prototype)&&i!==a.prototype&&o(e,i),e}},"80a8":function(e,t,a){},a049:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-breadcrumb",{attrs:{separator:e.separator}},e._l(e.breadcrumbItemList,(function(t,r){return a("el-breadcrumb-item",{key:r},[e._v(e._s(t))])})),1)},o=[],s={name:"Breadcrumb",props:{breadcrumbItemList:{type:Array,default:function(){return[]}},separator:{type:String,default:"/"}}},i=s,n=a("2877"),l=Object(n["a"])(i,r,o,!1,null,"13c0996c",null);t["a"]=l.exports},a9e3:function(e,t,a){"use strict";var r=a("83ab"),o=a("da84"),s=a("94ca"),i=a("6eeb"),n=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),g=a("7c73"),m=a("241c").f,p=a("06cf").f,h=a("9bf2").f,y=a("58a8").trim,f="Number",C=o[f],b=C.prototype,_=l(g(b))==f,v=function(e){var t,a,r,o,s,i,n,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=y(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(s=c.slice(2),i=s.length,n=0;n<i;n++)if(l=s.charCodeAt(n),l<48||l>o)return NaN;return parseInt(s,r)}return+c};if(s(f,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var P,w=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof w&&(_?d((function(){b.valueOf.call(a)})):l(a)!=f)?c(new C(v(t)),a,w):v(t)},S=r?m(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),G=0;S.length>G;G++)n(C,P=S[G])&&!n(w,P)&&h(w,P,p(C,P));w.prototype=b,b.constructor=w,i(o,f,w)}},c1ce:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:e.layout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},o=[],s=(a("a9e3"),{name:"Pagination",props:{currentPage:{type:Number,default:1},pageSizes:{type:Array,default:function(){return[1,2,5,10]}},pageSize:{type:Number,default:1},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},total:{type:Number,default:0}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)}}}),i=s,n=a("2877"),l=Object(n["a"])(i,r,o,!1,null,"6b330820",null);t["a"]=l.exports},c22e:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:e.width,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[e._t("default",[a("p",[e._v("自定义弹框内容")])]),e.isButtonGroupShow?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1):e._e()],2)},o=[],s={name:"Popup",props:{title:{type:String,default:"标题"},width:{type:String,default:"30%"},dialogVisible:{type:Boolean,default:!1},isButtonGroupShow:{type:Boolean,default:!0}},methods:{handleClose:function(){this.$emit("handleClose")},close:function(){this.$emit("close")},save:function(){this.$emit("save")}}},i=s,n=a("2877"),l=Object(n["a"])(i,r,o,!1,null,"6ca987d4",null);t["a"]=l.exports},c593:function(e,t,a){"use strict";a("80a8")},f5c0:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("breadcrumb",{attrs:{breadcrumbItemList:["商品管理","商品分类"]}}),a("el-card",[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddCategoryDialog}},[e._v("添加分类")])],1)],1),a("el-table",{attrs:{data:e.goodsCategoriesList,border:"","row-key":"cat_id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"cat_name",label:"分类名称"}}),a("el-table-column",{attrs:{prop:"cat_deleted",label:"是否有效"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cat_deleted?a("i",{staticClass:"el-icon-check"}):e._e(),a("i",{staticClass:"el-icon-close",attrs:{else:""}})]}}])}),a("el-table-column",{attrs:{prop:"cat_level",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.cat_level?a("el-tag",[e._v("等级一")]):e._e(),"1"==t.row.cat_level?a("el-tag",{attrs:{type:"success"}},[e._v("等级二")]):e._e(),"2"==t.row.cat_level?a("el-tag",{attrs:{type:"warning"}},[e._v("等级三")]):e._e(),"3"==t.row.cat_level?a("el-tag",{attrs:{type:"danger"}},[e._v("等级四")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作列"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showEditCategoryDialog(t.row.cat_id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.showDeleteMessageBox(t.row.cat_id)}}})]}}])})],1),a("pagination",{attrs:{currentPage:e.queryGoodsCategoriesParams.pagenum,pageSizes:e.pageSizes,pageSize:e.queryGoodsCategoriesParams.pagesize,total:e.total},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}}),a("popup",{attrs:{title:"添加分类",dialogVisible:e.addCategoryDialogVisible,width:"50%",isButtonGroupShow:!1},on:{handleClose:e.handleAddCategoryDialogClose}},[a("el-form",{ref:"addCategoryForm",attrs:{model:e.addCategoryParams,rules:e.addCategoryRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{attrs:{placeholder:"请输入分类"},model:{value:e.addCategoryParams.cat_name,callback:function(t){e.$set(e.addCategoryParams,"cat_name",t)},expression:"addCategoryParams.cat_name"}})],1),a("el-form-item",{attrs:{label:"选择分类"}},[a("el-cascader",{attrs:{options:e.allCategoryList,props:e.cascaderProps,clearable:!0},on:{change:e.handleChange},model:{value:e.selectKeys,callback:function(t){e.selectKeys=t},expression:"selectKeys"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addCategory}},[e._v("确 认")])],1)],1)],1),a("popup",{attrs:{title:"编辑分类",dialogVisible:e.editCategoryDialogVisible,width:"50%",isButtonGroupShow:!1},on:{handleClose:e.handleEditCategoryDialogClose}},[a("el-form",{ref:"editCategoryForm",attrs:{model:e.editCategoryParams,rules:e.addCategoryRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{attrs:{placeholder:"请输入分类"},model:{value:e.editCategoryParams.cat_name,callback:function(t){e.$set(e.editCategoryParams,"cat_name",t)},expression:"editCategoryParams.cat_name"}})],1),a("el-form-item",{attrs:{label:"选择分类"}},[a("el-cascader",{attrs:{options:e.allCategoryList,props:e.cascaderProps,clearable:!0},on:{change:e.handleEditChange},model:{value:e.selectKeys,callback:function(t){e.selectKeys=t},expression:"selectKeys"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.editCategory}},[e._v("确 认")])],1)],1)],1)],1)],1)},o=[],s=a("a049"),i=a("c1ce"),n=a("c22e"),l=a("1bab");function c(e){return Object(l["a"])({url:"categories",method:"get",params:{type:e.type,pagenum:e.pagenum?e.pagenum:"",pagesize:e.pagesize?e.pagesize:""}})}function u(e){return Object(l["a"])({url:"categories",method:"post",data:{cat_pid:e.cat_pid,cat_name:e.cat_name,cat_level:e.cat_level}})}function d(e){return Object(l["a"])({url:"categories/".concat(e),method:"get"})}function g(e){return Object(l["a"])({url:"categories/".concat(e.cat_id),method:"put",data:{cat_name:e.cat_name}})}function m(e){return Object(l["a"])({url:"categories/".concat(e),method:"delete"})}var p={name:"GoodsCategory",data:function(){return{goodsCategoriesList:[],queryGoodsCategoriesParams:{type:3,pagenum:1,pagesize:2},pageSizes:[1,2,5,10],total:0,addCategoryDialogVisible:!1,addCategoryParams:{cat_pid:0,cat_name:"",cat_level:0},addCategoryRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},allCategoryList:[],cascaderProps:{expandTrigger:"hover",label:"cat_name",value:"cat_id",children:"children",checkStrictly:!0},selectKeys:[],editCategoryDialogVisible:!1,editCategoryParams:{}}},components:{Breadcrumb:s["a"],Pagination:i["a"],Popup:n["a"]},created:function(){this.queryGoodsCategories(this.queryGoodsCategoriesParams)},methods:{queryGoodsCategories:function(e){var t=this;c(e).then((function(e){t.goodsCategoriesList=e.data.result,t.total=e.data.total}))},handleSizeChange:function(e){this.queryGoodsCategoriesParams.pagesize=e,this.queryGoodsCategories(this.queryGoodsCategoriesParams)},handleCurrentChange:function(e){this.queryGoodsCategoriesParams.pagenum=e,this.queryGoodsCategories(this.queryGoodsCategoriesParams)},showAddCategoryDialog:function(){var e=this;this.addCategoryDialogVisible=!0,c({type:2}).then((function(t){e.allCategoryList=t.data}))},addCategory:function(){var e=this;this.$refs.addCategoryForm.validate((function(t){t&&function(){u(e.addCategoryParams).then((function(t){201===t.meta.status?function(){e.$message.success(t.meta.msg),e.queryGoodsCategoriesParams.pagenum=1,e.queryGoodsCategories(e.queryGoodsCategoriesParams),e.addCategoryDialogVisible=!1,e.selectKeys=[]}():e.$message.error(t.meta.msg)}))}()}))},handleChange:function(){var e=this;0===this.selectKeys.length?function(){e.addCategoryParams.cat_pid=0,e.addCategoryParams.cat_level=0}():this.addCategoryParams.cat_pid=this.selectKeys[this.selectKeys.length-1],this.addCategoryParams.cat_level=this.selectKeys.length},handleAddCategoryDialogClose:function(){this.addCategoryDialogVisible=!1,this.selectKeys=[],this.$refs.addCategoryForm.resetFields()},showDeleteMessageBox:function(e){var t=this;console.log(e),this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m(e).then((function(e){200===e.meta.status?function(){t.$message({type:"success",message:e.meta.msg}),t.queryGoodsCategoriesParams.pagenum=1,t.queryGoodsCategories(t.queryGoodsCategoriesParams)}():t.$messgae.error(e.meta.msg)}))}))["catch"]((function(){t.$message({type:"info",message:"已取消删除"})}))},showEditCategoryDialog:function(e){var t=this;this.editCategoryDialogVisible=!0,d(e).then((function(e){t.editCategoryParams=e.data})),c({type:2}).then((function(e){t.allCategoryList=e.data}))},handleEditChange:function(){var e=this;0===this.selectKeys.length?function(){e.editCategoryParams.cat_pid=0,e.editCategoryParams.cat_level=0}():this.editCategoryParams.cat_pid=this.selectKeys[this.selectKeys.length-1],this.editCategoryParams.cat_level=this.selectKeys.length},editCategory:function(){var e=this;g(this.editCategoryParams).then((function(t){200===t.meta.status?function(){e.$message.success(t.meta.msg),e.queryGoodsCategoriesParams.pagenum=1,e.queryGoodsCategories(e.queryGoodsCategoriesParams),e.editCategoryDialogVisible=!1,e.selectKeys=[]}():e.$message.error(t.meta.msg)}))},handleEditCategoryDialogClose:function(){this.editCategoryDialogVisible=!1,this.selectKeys=[],this.$refs.editCategoryForm.resetFields()}}},h=p,y=(a("c593"),a("2877")),f=Object(y["a"])(h,r,o,!1,null,"2e91fbe4",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-1a2a8515.965d8533.js.map