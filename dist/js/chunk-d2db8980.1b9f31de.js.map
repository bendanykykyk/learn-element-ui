{"version":3,"sources":["webpack:///./src/views/rightManager/role/Role.vue?7210","webpack:///./src/components/common/popup/Popup.vue?bf77","webpack:///src/components/common/popup/Popup.vue","webpack:///./src/components/common/popup/Popup.vue?d21a","webpack:///./src/components/common/popup/Popup.vue","webpack:///./src/views/rightManager/role/Role.vue?76ac","webpack:///./src/network/role.js","webpack:///src/views/rightManager/role/Role.vue","webpack:///./src/views/rightManager/role/Role.vue?a14d","webpack:///./src/views/rightManager/role/Role.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","title","dialogVisible","width","handleClose","on","$event","close","_t","_v","staticClass","slot","save","_e","staticRenderFns","name","props","type","String","default","Boolean","isButtonGroupShow","methods","$emit","component","staticStyle","rolesList","scopedSlots","_u","key","fn","slotScope","_l","row","item1","index","id","class","removeRoleById","_s","authName","item2","index2","item3","showDispatchDialog","dispatchRightDialogVisible","handleClosePopup","saveRoleRight","ref","rightList","defaultProps","currentRightList","queryRole","request","url","method","deleteRoleById","roleId","rightId","queryRightList","dispatchRoleRight","rids","data","deleteRoleQuery","children","label","created","res","meta","status","$confirm","confirmButtonText","cancelButtonText","role","getAllRightIdList","node","arr","push","forEach","getCheckedString","then","checkedStr","join","closePopup","components","Breadcrumb","Popup"],"mappings":"2IAAA,W,kCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIO,MAAM,QAAUP,EAAIQ,cAAc,MAAQR,EAAIS,MAAM,eAAeT,EAAIU,aAAaC,GAAG,CAAC,iBAAiB,SAASC,GAAQZ,EAAIQ,cAAcI,GAAQ,MAAQZ,EAAIa,QAAQ,CAACb,EAAIc,GAAG,UAAU,CAACV,EAAG,IAAI,CAACJ,EAAIe,GAAG,eAAgBf,EAAqB,kBAAEI,EAAG,OAAO,CAACY,YAAY,gBAAgBV,MAAM,CAAC,KAAO,UAAUW,KAAK,UAAU,CAACb,EAAG,YAAY,CAACO,GAAG,CAAC,MAAQX,EAAIU,cAAc,CAACV,EAAIe,GAAG,SAASX,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWK,GAAG,CAAC,MAAQX,EAAIkB,OAAO,CAAClB,EAAIe,GAAG,UAAU,GAAGf,EAAImB,MAAM,IAC7lBC,EAAkB,GCmBtB,GACEC,KAAM,QACNC,MAAO,CAELf,MAAO,CACLgB,KAAMC,OACNC,QAAN,MAGIhB,MAAO,CACLc,KAAMC,OACNC,QAAN,OAGIjB,cAAe,CACbe,KAAMG,QACND,SAAN,GAEIE,kBAAmB,CACjBJ,KAAMG,QACND,SAAN,IAGEG,QAAS,CACPlB,YADJ,WAEMT,KAAK4B,MAAM,gBAGbhB,MALJ,WAMMZ,KAAK4B,MAAM,UAEbX,KARJ,WASMjB,KAAK4B,MAAM,WCpD4V,I,YCOzWC,EAAY,eACd,EACA/B,EACAqB,GACA,EACA,KACA,WACA,MAIa,OAAAU,E,kDClBf,IAAI/B,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,SAAW,IAAI,mBAAqB,CAAC,OAAQ,WAAWF,EAAG,UAAU,CAACE,MAAM,CAAC,OAAS,WAAW,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,YAAY,CAACN,EAAIe,GAAG,UAAUX,EAAG,WAAW,CAAC2B,YAAY,CAAC,MAAQ,QAAQzB,MAAM,CAAC,KAAON,EAAIgC,UAAU,OAAS,KAAK,CAAC5B,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,UAAU2B,YAAYjC,EAAIkC,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAW,OAAOrC,EAAIsC,GAAID,EAAUE,IAAY,UAAE,SAASC,EAAMC,GAAO,OAAOrC,EAAG,SAAS,CAAC+B,IAAIK,EAAME,GAAGC,MAAM,CAAC,WAAqB,GAATF,EAAa,QAAU,GAAI,YAAY,CAACrC,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,IAAI,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,SAAW,IAAIK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAI4C,eAAeP,EAAUE,IAAIG,GAAIF,EAAME,OAAO,CAAC1C,EAAIe,GAAG,IAAIf,EAAI6C,GAAGL,EAAMM,aAAa1C,EAAG,IAAI,CAACY,YAAY,yBAAyB,GAAGZ,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAKN,EAAIsC,GAAIE,EAAc,UAAE,SAASO,EAAMC,GAAQ,OAAO5C,EAAG,SAAS,CAAC+B,IAAIY,EAAML,GAAGC,MAAM,CAAW,GAAVK,EAAc,GAAK,UAAU,CAAC5C,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,IAAI,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,UAAU,SAAW,IAAIK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAI4C,eAAeP,EAAUE,IAAIG,GAAIK,EAAML,OAAO,CAAC1C,EAAIe,GAAGf,EAAI6C,GAAGE,EAAMD,aAAa1C,EAAG,IAAI,CAACY,YAAY,yBAAyB,GAAGZ,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAKN,EAAIsC,GAAIS,EAAc,UAAE,SAASE,GAAO,OAAO7C,EAAG,SAAS,CAAC+B,IAAIc,EAAMP,GAAGpC,MAAM,CAAC,KAAO,SAAS,SAAW,IAAIK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAI4C,eAAeP,EAAUE,IAAIG,GAAIO,EAAMP,OAAO,CAAC1C,EAAIe,GAAGf,EAAI6C,GAAGI,EAAMH,gBAAe,IAAI,MAAK,IAAI,YAAW1C,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,QAAQ,MAAQ,OAAOF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,WAAW,MAAQ,UAAUF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,WAAW,MAAQ,UAAUF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,KAAK,MAAQ,OAAO2B,YAAYjC,EAAIkC,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAW,MAAO,CAACjC,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,eAAe,KAAO,UAAUF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,iBAAiB,KAAO,UAAUF,EAAG,aAAa,CAACY,YAAY,OAAOV,MAAM,CAAC,OAAS,OAAO,QAAU,KAAK,UAAY,MAAM,WAAY,IAAQ,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,kBAAkB,KAAO,QAAQK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAIkD,mBAAmBb,EAAUE,UAAU,WAAW,IAAI,GAAGnC,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,OAAO,cAAgBN,EAAImD,2BAA2B,MAAQ,OAAOxC,GAAG,CAAC,YAAcX,EAAIoD,iBAAiB,KAAOpD,EAAIqD,gBAAgB,CAACjD,EAAG,UAAU,CAACkD,IAAI,UAAUhD,MAAM,CAAC,KAAON,EAAIuD,UAAU,MAAQvD,EAAIwD,aAAa,gBAAgB,GAAG,WAAW,KAAK,sBAAqB,EAAK,uBAAuBxD,EAAIyD,qBAAqB,IAAI,IACnnFrC,EAAkB,G,0FCEf,SAASsC,IACd,OAAOC,eAAQ,CACbC,IAAK,QACLC,OAAQ,QAKL,SAASC,EAAeC,EAAQC,GACrC,OAAOL,eAAQ,CACbC,IAAK,SAAF,OAAWG,EAAX,mBAA4BC,GAC/BH,OAAQ,WAUL,SAASI,EAAe1C,GAC7B,OAAOoC,eAAQ,CACbC,IAAK,UAAF,OAAYrC,GACfsC,OAAQ,QAUL,SAASK,EAAkBH,EAAQI,GACxC,OAAOR,eAAQ,CACbC,IAAK,SAAF,OAAWG,EAAX,WACHF,OAAQ,OACRO,KAAM,CACJL,OAAQA,EACRI,KAAMA,KCyFZ,OACE9C,KAAM,OACN+C,KAFF,WAGI,MAAO,CACLpC,UAAW,GACXqC,gBAAiB,GACjBlB,4BAA4B,EAC5BI,UAAW,GAEXC,aAAc,CACZc,SAAU,WACVC,MAAO,YAGTd,iBAAkB,GAClBM,OAAQ,IAGZS,QAlBF,WAmBIvE,KAAKyD,aAEP9B,QAAS,CACP8B,UADJ,WACA,WACM,IAAN,kBAC4B,MAApBe,EAAIC,KAAKC,OACjB,mBACA,iCAGI/B,eARJ,SAQA,gBACM3C,KAAK2E,SAAS,qBAAsB,KAAM,CACxCC,kBAAmB,KACnBC,iBAAkB,KAClBvD,KAAM,YAEd,iBACQ,EAAR,uBANA,UAQA,gBAEIuC,eAnBJ,SAmBA,gBACM,EAAN,uBAC4B,MAApBW,EAAIC,KAAKC,OACjB,WACU,EAAV,YACU,EAAV,6BAFA,GAIA,iCAGIzB,mBA7BJ,SA6BA,GAEMjD,KAAK8D,OAASgB,EAAKrC,GAEnBzC,KAAKgE,eAAe,QAEpBhE,KAAKkD,4BAA6B,EAElClD,KAAK+E,kBAAkBD,EAAM9E,KAAKwD,mBAGpCuB,kBAxCJ,SAwCA,gBACM,IAAKC,EAAKX,SACR,OAAOY,EAAIC,KAAKF,EAAKvC,IAEvBuC,EAAKX,SAASc,SAAQ,SAA5B,GACQ,OAAO,EAAf,2BAIInB,eAjDJ,SAiDA,cACM,EAAN,qBAC4B,MAApBQ,EAAIC,KAAKC,OACjB,WACU,EAAV,iBADA,GAGA,iCAGItB,cA1DJ,WA0DA,WACMa,EAAkBjE,KAAK8D,OAAQ9D,KAAKoF,oBAAoBC,MAAK,SAAnE,GAC4B,MAApBb,EAAIC,KAAKC,OACjB,WACU,EAAV,8BACU,EAAV,6BACU,EAAV,YAHA,GAKA,iCAKIU,iBAvEJ,WAwEM,IAAN,2BACA,qCADA,eAEA,0CAEM,OAAOE,EAAWC,KAAK,MAEzBC,WA9EJ,WA+EMxF,KAAKkD,4BAA6B,EAClClD,KAAKwD,iBAAmB,IAE1BL,iBAlFJ,WAmFMnD,KAAKkD,4BAA6B,EAClClD,KAAKwD,iBAAmB,KAG5BiC,WAAY,CACVC,WAAJ,OACIC,MAAJ,SClP4W,I,wBCQxW9D,EAAY,eACd,EACA/B,EACAqB,GACA,EACA,KACA,WACA,MAIa,aAAAU,E","file":"js/chunk-d2db8980.1b9f31de.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=ddae7aec&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.title,\"visible\":_vm.dialogVisible,\"width\":_vm.width,\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.close}},[_vm._t(\"default\",[_c('p',[_vm._v(\"自定义弹框内容\")])]),(_vm.isButtonGroupShow)?_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.handleClose}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"确 定\")])],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--分配权限对话框-->\n  <el-dialog\n    :title=\"title\"\n    :visible.sync=\"dialogVisible\"\n    :width=\"width\"\n    @close=\"close\"\n    :before-close=\"handleClose\"\n  >\n    <slot>\n      <p>自定义弹框内容</p>\n    </slot>\n    <span slot=\"footer\" class=\"dialog-footer\" v-if=\"isButtonGroupShow\">\n      <el-button @click=\"handleClose\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nexport default {\n  name: \"Popup\",\n  props: {\n    //对话框标题\n    title: {\n      type: String,\n      default: \"标题\",\n    },\n    //对话框宽度，百分比\n    width: {\n      type: String,\n      default: \"30%\",\n    },\n    //对话框显示\n    dialogVisible: {\n      type: Boolean,\n      default: false,\n    },\n    isButtonGroupShow: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  methods: {\n    handleClose() {\n      this.$emit(\"handleClose\");\n    },\n    //dialog关闭的回调事件\n    close() {\n      this.$emit(\"close\");\n    },\n    save() {\n      this.$emit(\"save\");\n    },\n    // cancel() {\n    //   this.$emit(\"cancel\");\n    // },\n  },\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Popup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Popup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Popup.vue?vue&type=template&id=6ca987d4&scoped=true&\"\nimport script from \"./Popup.vue?vue&type=script&lang=js&\"\nexport * from \"./Popup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ca987d4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('breadcrumb',{attrs:{\"sperator\":\"/\",\"breadcrumbItemList\":['权限管理', '角色列表']}}),_c('el-card',{attrs:{\"shadow\":\"always\"}},[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"添加角色\")]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.rolesList,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotScope){return _vm._l((slotScope.row.children),function(item1,index){return _c('el-row',{key:item1.id,class:['bdbottom', index == 0 ? 'bdtop' : '', 'vcenter']},[_c('el-col',{attrs:{\"span\":5}},[_c('el-tag',{attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRoleById(slotScope.row.id, item1.id)}}},[_vm._v(\" \"+_vm._s(item1.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":19}},_vm._l((item1.children),function(item2,index2){return _c('el-row',{key:item2.id,class:[index2 == 0 ? '' : 'bdtop']},[_c('el-col',{attrs:{\"span\":6}},[_c('el-tag',{attrs:{\"type\":\"warning\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRoleById(slotScope.row.id, item2.id)}}},[_vm._v(_vm._s(item2.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":18}},_vm._l((item2.children),function(item3){return _c('el-tag',{key:item3.id,attrs:{\"type\":\"danger\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRoleById(slotScope.row.id, item3.id)}}},[_vm._v(_vm._s(item3.authName))])}),1)],1)}),1)],1)})}}])}),_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleDesc\",\"label\":\"角色描述\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotScope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"}}),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"设置\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showDispatchDialog(slotScope.row)}}})],1)]}}])})],1)],1),_c('popup',{attrs:{\"title\":\"分配权限\",\"dialogVisible\":_vm.dispatchRightDialogVisible,\"width\":\"45%\"},on:{\"handleClose\":_vm.handleClosePopup,\"save\":_vm.saveRoleRight}},[_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.rightList,\"props\":_vm.defaultProps,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":true,\"default-checked-keys\":_vm.currentRightList}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { request } from \"./request\";\n\n//\b查询角色列表信息 1.5.1. 角色列表\nexport function queryRole() {\n  return request({\n    url: \"roles\",\n    method: \"get\",\n  });\n}\n\n//\b删除角色指定权限\nexport function deleteRoleById(roleId, rightId) {\n  return request({\n    url: `roles/${roleId}/rights/${rightId}`,\n    method: \"delete\",\n  });\n}\n\n/**\n * @description: 获取所有权限列表\n * @method: get\n * @param {*} type （list 或 tree , list 列表显示权限）\n * @return {*}\n */\nexport function queryRightList(type) {\n  return request({\n    url: `rights/${type}`,\n    method: \"get\",\n  });\n}\n\n/**\n * @description: 角色授权\n * @param {*} roleId 当前角色的id\n * @param {*} rids 1，2，3级节点，半选中和全选中都要\n * @return {*}\n */\nexport function dispatchRoleRight(roleId, rids) {\n  return request({\n    url: `roles/${roleId}/rights`,\n    method: \"post\",\n    data: {\n      roleId: roleId,\n      rids: rids,\n    },\n  });\n}\n","<template>\n  <div>\n    <!--面包屑-->\n    <breadcrumb\n      sperator=\"/\"\n      :breadcrumbItemList=\"['权限管理', '角色列表']\"\n    ></breadcrumb>\n    <!--卡片-->\n    <el-card shadow=\"always\">\n      <!--添加角色按钮-->\n      <el-button type=\"primary\">添加角色</el-button>\n\n      <!--表格-->\n      <el-table :data=\"rolesList\" stripe style=\"width: 100%\">\n        <!--展开子列-->\n        <el-table-column type=\"expand\">\n          <template v-slot:default=\"slotScope\">\n            <el-row\n              v-for=\"(item1, index) in slotScope.row.children\"\n              :key=\"item1.id\"\n              :class=\"['bdbottom', index == 0 ? 'bdtop' : '', 'vcenter']\"\n            >\n              <!--渲染一级权限-->\n              <el-col :span=\"5\">\n                <el-tag\n                  closable\n                  @close=\"removeRoleById(slotScope.row.id, item1.id)\"\n                >\n                  {{ item1.authName }}</el-tag\n                >\n                <i class=\"el-icon-caret-right\"></i>\n              </el-col>\n              <!--渲染二，三级权限列-->\n              <el-col :span=\"19\">\n                <el-row\n                  v-for=\"(item2, index2) in item1.children\"\n                  :key=\"item2.id\"\n                  :class=\"[index2 == 0 ? '' : 'bdtop']\"\n                >\n                  <!--第二列-->\n                  <el-col :span=\"6\">\n                    <el-tag\n                      type=\"warning\"\n                      closable\n                      @close=\"removeRoleById(slotScope.row.id, item2.id)\"\n                      >{{ item2.authName }}</el-tag\n                    >\n                    <i class=\"el-icon-caret-right\"></i>\n                  </el-col>\n                  <!--第三列-->\n                  <el-col :span=\"18\">\n                    <el-tag\n                      v-for=\"item3 in item2.children\"\n                      :key=\"item3.id\"\n                      type=\"danger\"\n                      closable\n                      @close=\"removeRoleById(slotScope.row.id, item3.id)\"\n                      >{{ item3.authName }}</el-tag\n                    >\n                  </el-col>\n                </el-row>\n              </el-col>\n            </el-row>\n          </template>\n        </el-table-column>\n        <!--父列-->\n        <el-table-column type=\"index\" label=\"#\"> </el-table-column>\n        <el-table-column prop=\"roleName\" label=\"角色名称\"> </el-table-column>\n        <el-table-column prop=\"roleDesc\" label=\"角色描述\"> </el-table-column>\n        <el-table-column label=\"操作\" width=\"180\">\n          <template v-slot:default=\"slotScope\">\n            <el-button\n              type=\"primary\"\n              icon=\"el-icon-edit\"\n              size=\"mini\"\n            ></el-button>\n            <el-button\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              size=\"mini\"\n            ></el-button>\n            <el-tooltip\n              class=\"item\"\n              effect=\"dark\"\n              content=\"设置\"\n              placement=\"top\"\n              :enterable=\"false\"\n            >\n              <el-button\n                type=\"warning\"\n                icon=\"el-icon-setting\"\n                size=\"mini\"\n                @click=\"showDispatchDialog(slotScope.row)\"\n              ></el-button>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n    <!--分配权限对话框-->\n    <popup\n      title=\"分配权限\"\n      :dialogVisible=\"dispatchRightDialogVisible\"\n      width=\"45%\"\n      @handleClose=\"handleClosePopup\"\n      @save=\"saveRoleRight\"\n    >\n      <!--树形控件-->\n      <el-tree\n        :data=\"rightList\"\n        :props=\"defaultProps\"\n        show-checkbox\n        node-key=\"id\"\n        :default-expand-all=\"true\"\n        :default-checked-keys=\"currentRightList\"\n        ref=\"treeRef\"\n      ></el-tree>\n    </popup>\n  </div>\n</template>\n\n<script>\n//导入公共组件\nimport Breadcrumb from \"components/common/breadcrumb/Breadcrumb\";\nimport Popup from \"components/common/popup/Popup\";\n//导入网络请求\nimport {\n  queryRole,\n  deleteRoleById,\n  queryRightList,\n  dispatchRoleRight,\n} from \"network/role\";\nexport default {\n  name: \"Role\",\n  data() {\n    return {\n      rolesList: [], //所有角色的数组\n      deleteRoleQuery: {},\n      dispatchRightDialogVisible: false,\n      rightList: [], //所有权限的数组\n      //权限弹出框文本显示\n      defaultProps: {\n        children: \"children\",\n        label: \"authName\",\n      },\n      //当前角色的权限列表,直接存放id\n      currentRightList: [],\n      roleId: 0,\n    };\n  },\n  created() {\n    this.queryRole();\n  },\n  methods: {\n    queryRole() {\n      queryRole().then((res) => {\n        res.meta.status === 200\n          ? (this.rolesList = res.data)\n          : this.$message.error(res.meta.msg);\n      });\n    },\n    removeRoleById(roleId, rightId) {\n      this.$confirm(\"此操作将永久删除该权限, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          this.deleteRoleById(roleId, rightId);\n        })\n        .catch(() => {});\n    },\n    deleteRoleById(roleId, rightId) {\n      deleteRoleById(roleId, rightId).then((res) => {\n        res.meta.status === 200\n          ? (() => {\n              this.queryRole();\n              this.$message.success(res.meta.msg);\n            })()\n          : this.$message.error(res.meta.msg);\n      });\n    },\n    showDispatchDialog(role) {\n      //保存角色id\n      this.roleId = role.id;\n      //获取权限列表\n      this.queryRightList(\"tree\");\n      //显示对话框\n      this.dispatchRightDialogVisible = true;\n      //存储当前角色的权限列表\n      this.getAllRightIdList(role, this.currentRightList);\n    },\n    //从treeObject对象中拿到所有id，存放到arr中\n    getAllRightIdList(node, arr) {\n      if (!node.children) {\n        return arr.push(node.id);\n      }\n      node.children.forEach((item) => {\n        return this.getAllRightIdList(item, arr);\n      });\n    },\n    //查询权限列表\n    queryRightList(type) {\n      queryRightList(type).then((res) => {\n        res.meta.status === 200\n          ? (() => {\n              this.rightList = res.data;\n            })()\n          : this.$message.error(res.meta.msg);\n      });\n    },\n    saveRoleRight() {\n      dispatchRoleRight(this.roleId, this.getCheckedString()).then((res) => {\n        res.meta.status === 200\n          ? (() => {\n              this.dispatchRightDialogVisible = false;\n              this.$message.success(res.meta.msg);\n              this.queryRole();\n            })()\n          : this.$message.error(res.meta.msg);\n      });\n    },\n\n    //获取tree中半选全选的的节点，返回形式为逗号拼接的字符串\n    getCheckedString() {\n      const checkedStr = [\n        ...this.$refs.treeRef.getCheckedKeys(),\n        ...this.$refs.treeRef.getHalfCheckedKeys(),\n      ];\n      return checkedStr.join(\",\");\n    },\n    closePopup() {\n      this.dispatchRightDialogVisible = false;\n      this.currentRightList = [];\n    },\n    handleClosePopup() {\n      this.dispatchRightDialogVisible = false;\n      this.currentRightList = [];\n    },\n  },\n  components: {\n    Breadcrumb,\n    Popup,\n  },\n};\n</script>\n\n<style scoped>\n.vcenter {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.el-tag {\n  margin: 7px;\n}\n.bdtop {\n  border-top: 1px solid #eee;\n}\n.bdbottom {\n  border-bottom: 1px solid #eee;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=ddae7aec&scoped=true&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Role.vue?vue&type=style&index=0&id=ddae7aec&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ddae7aec\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}